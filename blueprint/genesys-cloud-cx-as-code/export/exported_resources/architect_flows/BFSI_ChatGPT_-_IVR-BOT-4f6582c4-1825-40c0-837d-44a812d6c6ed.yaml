botFlow:
  name: BFSI ChatGPT - IVR
  division: Home
  startUpRef: "/botFlow/bots/bot[Default Bot_10]"
  defaultLanguage: en-us
  supportedLanguages:
    en-us:
      defaultLanguageSkill:
        lit:
          name: English (en-us)
      speechToText:
        engine:
          name: Genesys Enhanced v2
          defaultEngine: true
  variables:
    - stringVariable:
        name: Flow.BotResponse
        initialValue:
          noValue: true
        isInput: false
        isOutput: false
    - integerVariable:
        name: Flow.loop
        initialValue:
          noValue: true
        isInput: false
        isOutput: false
    - stringVariable:
        name: Slot.AccountNumber
        initialValue:
          noValue: true
        isInput: true
        isOutput: true
    - stringVariable:
        name: Slot.CustomerQuery
        initialValue:
          noValue: true
        isInput: true
        isOutput: true
    - stringVariable:
        name: Slot.ZipCode
        initialValue:
          noValue: true
        isInput: true
        isOutput: true
  settingsActionDefaults:
    askForIntent:
      voiceEndOfInputTimeout:
        lit:
          seconds: 1
    askForBoolean:
      voiceEndOfInputTimeout:
        lit:
          seconds: 1
    askForSlot:
      voiceEndOfInputTimeout:
        lit:
          seconds: 1
    loopAnythingElse:
      voiceEndOfInputTimeout:
        lit:
          seconds: 1
  settingsErrorHandling:
    errorHandling:
      exit:
        none: true
    enableAgentEscalation:
      lit: true
    errorEventHandover:
      exp: "MakeCommunication(\n  \"Sorry, an error occurred. One moment, please, while I put you through to someone who can help.\")"
    agentEscalationConfirmation:
      exp: "MakeCommunication(\n  \"You want to speak to an advisor. Is that correct?\")"
    agentEscalationHandover:
      exp: "MakeCommunication(\n  \"One moment, please, and I will put you through to someone.\")"
    recognitionFailureEventHandover:
      exp: "MakeCommunication(\n  \"Sorry, I'm having trouble understanding you. One moment, please, while I put you through to someone who can help.\")"
    recognitionFailureEventHandling:
      exit:
        none: true
    agentEscalationHandling:
      exit:
        none: true
  settingsPrompts:
    ensureAudioInPrompts: false
    promptMediaToValidate:
      - mediaType: audio
      - mediaType: tts
  settingsBotFlow:
    intentSettings:
      - intent:
          confirmation:
            exp: "MakeCommunication(\n  \"I think you want to Check Account Balance, is that correct?\")"
          name: Check Account Balance
      - intent:
          confirmation:
            exp: "MakeCommunication(\n  \"I think you want to Find a Branch, is that correct?\")"
          name: Find a Branch
      - intent:
          confirmation:
            exp: "MakeCommunication(\n  \"I think you want to YES, is that correct?\")"
          name: YES
      - intent:
          confirmation:
            exp: "MakeCommunication(\n  \"I think you want to NO, is that correct?\")"
          name: NO
  settingsUserInput:
    enableBargeIn:
      lit: true
    enableAutomaticQuickReplies:
      lit: true
    noMatchesMax:
      lit: 3
    noInputsMax:
      lit: 3
    noInputsTimeout:
      lit:
        seconds: 7
    speechToTextSpeechDetectionSensitivity:
      noValue: true
    speechToTextMaxSpeechTimeout:
      noValue: true
    enableIntentClassificationHinting:
      lit: true
    interDigitTimeout:
      lit:
        seconds: 3
    dtmfTerminatingCharacter:
      lit: "#"
    confirmationRejectionsMax:
      lit: 3
    collectionLowConfidenceThreshold:
      lit: 20
    collectionHighConfidenceThreshold:
      lit: 70
    confirmationLowConfidenceThreshold:
      lit: 40
    noMatchApology:
      exp: "MakeCommunication(\n  \"Sorry.\")"
    noInputApology:
      exp: "MakeCommunication(\n  \"Sorry, I didn't hear you.\")"
    noToConfirmationApology:
      exp: "MakeCommunication(\n  \"My mistake.\")"
    confirmationNoMatchApology:
      exp: "MakeCommunication(\n  \"Sorry, please say yes or no.\")"
    confirmationNoInputApology:
      exp: "MakeCommunication(\n  \"Sorry, I didn't hear you.  Please say yes or no.\")"
  settingsKnowledge:
    none: true
  bots:
    - bot:
        name: Default Bot
        refId: Default Bot_10
        actions:
          - askForSlot:
              name: Ask for Slot
              slot:
                name: CustomerQuery
              question:
                exp: "MakeCommunication(\n  \"You can ask me any questions . Go ahead.\")"
              customValidation:
                noValue: true
              confirmationMode:
                lit: never
              noInput:
                exp: "MakeCommunication(\n  \"Please say or enter the\", \n  \"(please put your slot name here)\")"
              noMatch:
                exp: "MakeCommunication(\n  \"Please give me the\", \n  \"(please put your slot name here)\")"
              voiceEndOfInputTimeout:
                noValue: true
              outputs:
                maxNoInputs:
                  enabled: false
                maxNoMatches:
                  enabled: false
          - loop:
              name: Loop
              currentIndex:
                var: Flow.loop
              loopCount:
                lit: 99
              outputs:
                loop:
                  actions:
                    - callData:
                        name: Call Data Action
                        timeout:
                          lit:
                            minutes: 1
                        category:
                          CGpt:
                            dataAction:
                              InteractWithCGPT - BFSI:
                                inputs:
                                  Intent:
                                    exp: Slot.CustomerQuery
                                successOutputs:
                                  Response:
                                    var: Flow.BotResponse
                                failureOutputs:
                                  errorCode:
                                    noValue: true
                                  status:
                                    noValue: true
                                  correlationId:
                                    noValue: true
                                  entityId:
                                    noValue: true
                                  entityName:
                                    noValue: true
                                  userMessage:
                                    noValue: true
                                  userParamsMessage:
                                    noValue: true
                                  userParams.key:
                                    noValue: true
                                  userParams.value:
                                    noValue: true
                                  details.errorCode:
                                    noValue: true
                                  details.fieldName:
                                    noValue: true
                                  details.entityId:
                                    noValue: true
                                  details.entityName:
                                    noValue: true
                        outputs:
                          success:
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - string:
                                        variable: Slot.CustomerQuery
                                        value:
                                          lit: ""
                                    - string:
                                        variable: Flow.BotResponse
                                        value:
                                          exp: Substring(Flow.BotResponse,4,Length(Flow.BotResponse))
                              - communicate:
                                  name: Communicate
                                  communication:
                                    exp: "MakeCommunication(\n  ToCommunication(Flow.BotResponse))"
                              - communicate:
                                  name: Communicate
                                  communication:
                                    exp: "MakeCommunication(\n  ToCommunicationBlank(1000))"
                              - askForIntent:
                                  name: Ask for Intent
                                  question:
                                    exp: "MakeCommunication(\n  \"You want to ask more questions ?\")"
                                  noInput:
                                    exp: "MakeCommunication(\n  \"Just speak a short sentence that describes your query. For example, \\\"Check my account balance\\\"\")"
                                  noMatch:
                                    exp: "MakeCommunication(\n  \"Tell me again what you would like to do.\")"
                                  voiceEndOfInputTimeout:
                                    noValue: true
                                  outputs:
                                    intents:
                                      - intent:
                                          name: Check Account Balance
                                          enabled: false
                                      - intent:
                                          name: Find a Branch
                                          enabled: false
                                      - intent:
                                          name: NO
                                          actions:
                                            - loopExit:
                                                name: Exit Loop
                                          enabled: true
                                      - intent:
                                          name: YES
                                          actions:
                                            - askForSlot:
                                                name: Ask for Slot
                                                slot:
                                                  name: CustomerQuery
                                                question:
                                                  exp: "MakeCommunication(\n  \"Okay. What is Your next Question\")"
                                                customValidation:
                                                  noValue: true
                                                confirmationMode:
                                                  lit: never
                                                noInput:
                                                  exp: "MakeCommunication(\n  \"Please say or enter the\", \n  \"(please put your slot name here)\")"
                                                noMatch:
                                                  exp: "MakeCommunication(\n  \"Please give me the\", \n  \"(please put your slot name here)\")"
                                                voiceEndOfInputTimeout:
                                                  noValue: true
                                                outputs:
                                                  maxNoInputs:
                                                    enabled: false
                                                  maxNoMatches:
                                                    enabled: false
                                          enabled: true
                                    noIntent:
                                      enabled: false
                                    knowledge:
                                      enabled: false
                                    maxNoInputs:
                                      enabled: false
          - exitBotFlow:
              name: Exit Bot Flow
  settingsNaturalLanguageUnderstanding:
    nluDomainVersion:
      intents:
        - utterances:
            - segments:
                - text: "My account number is "
                - text: "87654321"
                  entity:
                    name: AccountNumber
                - text: ", what's the balance?"
              id: 4e99f27f-6afc-4419-9198-4e30d2c1719b
              source: User
            - segments:
                - text: Tell me what the balance of my account is
              id: f48f3b99-75c0-4157-8d65-908da3406409
              source: User
            - segments:
                - text: Check account balance
              id: 5adaaf55-bfce-4d2d-b2af-7dcd428e69d9
              source: User
            - segments:
                - text: Balance enquiry
              id: 5b6292e3-3418-487d-aa9b-4c53e96ad1f5
              source: User
            - segments:
                - text: "What's the balance on account "
                - text: "12345678"
                  entity:
                    name: AccountNumber
                - text: "?"
              id: 7f0b3944-2efe-47a8-8f68-05f21692806d
              source: User
            - segments:
                - text: I want to check my account balance
              id: 4c6d4c85-7c4d-4c57-ae92-8b283524a371
              source: User
          entityNameReferences:
            - AccountNumber
          id: eb4075ff-27d6-4451-be0e-9d2d47fcf357
          name: Check Account Balance
        - utterances:
            - segments:
                - text: I want to find my local branch please
              id: 0f25537b-7fc0-4dd8-be41-9f6225e543ac
              source: User
            - segments:
                - text: "What's the closest branch to "
                - text: "90210"
                  entity:
                    name: ZipCode
                - text: "?"
              id: 327e49a5-f161-40e2-b022-6a671b26f3a0
              source: User
            - segments:
                - text: Where's my nearest branch?
              id: 343dfd99-8e12-4a43-a6d6-cdd2b0b075ac
              source: User
          entityNameReferences:
            - ZipCode
          id: 2bab1043-4405-48fd-8cf4-ae68be91f507
          name: Find a Branch
        - utterances:
            - segments:
                - text: done
              id: 1e0b3c05-15cf-4ff9-8793-38dcab22aca1
              source: User
            - segments:
                - text: no thanks
              id: f6b3d6b8-90a0-4baa-97a8-2e7b3c958138
              source: User
            - segments:
                - text: i am done
              id: 346cb605-92a8-48db-a33f-34216ca0d0c9
              source: User
            - segments:
                - text: that is fine
              id: 6a7a7a45-ac04-4e8b-aa39-816683b906e5
              source: User
            - segments:
                - text: take to me main menu
              id: 7850d2e6-c5f4-4199-9e12-fabfdd4ea02d
              source: User
            - segments:
                - text: no
              id: 1fb0b1d2-126b-4a12-9c70-b30c0e5a060f
              source: User
            - segments:
                - text: Nope
              id: 8bcce41f-70d6-46b1-b673-1b431cb1f1ed
              source: User
          entityNameReferences: []
          id: 1b128324-0c01-4c29-ab97-6cdd7b64d138
          name: NO
        - utterances:
            - segments:
                - text: yup
              id: b5f3628d-43e3-4fe7-8255-fe34a0cc029d
              source: User
            - segments:
                - text: i have more question
              id: 43a30b79-c8a3-4a5f-b63d-b6e5ca6b4086
              source: User
            - segments:
                - text: question
              id: e0f3318f-2acd-44d2-b2b1-3db24a2f7b98
              source: User
            - segments:
                - text: i would like to
              id: 711037f1-b72b-449a-981f-3a412cb35390
              source: User
            - segments:
                - text: Yes
              id: 5bef4ec9-0af6-45a3-a673-259ccb8ea8e6
              source: User
          entityNameReferences: []
          id: a82f6d45-c09a-4374-bc7f-8934d849bd9a
          name: YES
      entities:
        - name: AccountNumber
          type: AccountNumberType
        - name: CustomerQuery
          type: "builtin:any"
        - name: ZipCode
          type: ZipCodeType
      entityTypes:
        - name: AccountNumberType
          description: The description of the Entity Type "AccountNumberType"
          mechanism:
            type: Regex
            restricted: true
            items:
              - value: "\\b[0-9]{8}\\b"
                synonyms: []
        - name: ZipCodeType
          description: The description of the Entity Type "ZipCodeType"
          mechanism:
            type: Regex
            restricted: true
            items:
              - value: "\\b[0-9]{5}\\b"
                synonyms: []
      language: en-us
      languageVersions: {}
    mutedUtterances: []
