inqueueCall:
  name: 2445093_F_InQueue
  description: ""
  division: Home
  defaultLanguage: en-us
  supportedLanguages:
    en-us:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        defaultEngine:
          defaultVoice: true
    es-es:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        defaultEngine:
          voice: es-ES-AbrilNeural
  variables:
    - stringVariable:
        name: Flow.input
        initialValue:
          noValue: true
  settingsInQueueCall:
    holdMusic:
      lit:
        name: PromptSystem.on_hold_music
  settingsActionDefaults:
    playAudioOnSilence:
      timeout:
        lit:
          seconds: 40
    detectSilence:
      timeout:
        lit:
          seconds: 40
    callData:
      processingPrompt:
        noValue: true
    collectInput:
      noEntryTimeout:
        lit:
          seconds: 5
    dialByExtension:
      interDigitTimeout:
        lit:
          seconds: 6
    transferToUser:
      connectTimeout:
        noValue: true
    transferToNumber:
      connectTimeout:
        noValue: true
    transferToGroup:
      connectTimeout:
        noValue: true
    transferToFlowSecure:
      connectTimeout:
        lit:
          seconds: 15
  settingsErrorHandling:
    errorHandling:
      disconnect:
        none: true
    preHandlingAudio:
      tts: Sorry, an error occurred. Please try your call again.
  settingsPrompts:
    ensureAudioInPrompts: false
    promptMediaToValidate:
      - mediaType: audio
      - mediaType: tts
  startUpTaskActions:
    - holdMusic:
        name: Hold Music
        prompt:
          exp: Flow.HoldPrompt
        bargeInEnabled:
          lit: false
        playStyle:
          duration:
            lit:
              seconds: 15
    - playPositionInQueue:
        name: Play Position In Queue
        positionInQueue:
          exp: Call.PositionInQueue
        playbackMode: number
    - playEstimatedWaitTime:
        name: Play Estimated Wait Time
        estimatedWaitTime:
          exp: Call.EstimatedWaitTime
        roundingInterval:
          lit:
            minutes: 5
        specificRoundingIntervals:
          - lit:
              seconds: 30
          - lit:
              minutes: 1
          - lit:
              minutes: 2
          - lit:
              minutes: 5
        playbackMode: lessThan
    - collectInput:
        name: Collect Input
        inputData:
          var: Flow.input
        digits:
          range:
            min: 1
            max: 4
        interDigitTimeout:
          noValue: true
        noEntryTimeout:
          noValue: true
        inputAudio:
          alternateSequences:
            en-us:
              tts: Based on your wait time. To leave a voice mail press or To get a callback Press 1. To stay in queue and talk to our agent Press 2.
            es-es:
              tts: Según su tiempo de espera. Para dejar un mensaje de voz, presione o Para recibir una devolución de llamada, presione 1. Para permanecer en la fila y hablar con nuestro agente, presione 2.
        acceptJustStar:
          lit: false
        acceptJustPound:
          lit: false
        verificationType: none
        outputs:
          success:
            actions:
              - decision:
                  name: Decision
                  condition:
                    exp: Flow.input == "1"
                  outputs:
                    "yes":
                      actions:
                        - collectInput:
                            name: Collect Input
                            inputData:
                              var: Task.input2
                            digits:
                              range:
                                min: 1
                                max: 20
                            interDigitTimeout:
                              noValue: true
                            noEntryTimeout:
                              noValue: true
                            inputAudio:
                              alternateSequences:
                                en-us:
                                  tts: If you want to leave a voicemail press 1 if you want a call back press 2
                                es-es:
                                  tts: Si desea dejar un mensaje de voz, presione 1; si desea que le devuelvan la llamada, presione 2
                            acceptJustStar:
                              lit: false
                            acceptJustPound:
                              lit: false
                            verificationType: none
                            outputs:
                              success:
                                actions:
                                  - decision:
                                      name: Decision
                                      condition:
                                        exp: Task.input2 == "1"
                                      outputs:
                                        "yes":
                                          actions:
                                            - transferToVoicemail:
                                                name: Transfer to Voicemail
                                                destination:
                                                  queue:
                                                    callbackNumber:
                                                      exp: ToPhoneNumber(Call.Ani)
                                                    calleeName:
                                                      noValue: true
                                                    voicemailGreeting:
                                                      prompt: PromptSystem.voicemail_greeting
                                                failureOutputs:
                                                  errorType:
                                                    noValue: true
                                                  errorMessage:
                                                    noValue: true
                                                outputs:
                                                  failure:
                                                    actions:
                                                      - playAudio:
                                                          name: Play Audio
                                                          audio:
                                                            alternateSequences:
                                                              en-us:
                                                                tts: Sorry the voicemail was not recorded properly. Please try later.
                                                              es-es:
                                                                tts: Lo sentimos, el buzón de voz no se grabó correctamente. Por favor, inténtelo de nuevo más tarde.
                                        "no":
                                          actions:
                                            - createCallback:
                                                name: Create Callback
                                                callbackNumber:
                                                  exp: ToPhoneNumber(Call.Ani)
                                                calleeName:
                                                  noValue: true
                                            - playAudio:
                                                name: Play Audio
                                                audio:
                                                  alternateSequences:
                                                    en-us:
                                                      tts: You have chosen to get a callback. Thank you for calling.
                                                    es-es:
                                                      tts: Ha elegido recibir una devolución de llamada. Gracias por llamar.
                                            - disconnect:
                                                name: Disconnect
                              failure:
                                actions:
                                  - createCallback:
                                      name: Create Callback
                                      callbackNumber:
                                        exp: ToPhoneNumber(Call.Ani)
                                      calleeName:
                                        noValue: true
                                  - playAudio:
                                      name: Play Audio
                                      audio:
                                        alternateSequences:
                                          en-us:
                                            tts: You have chosen to get a callback. Thank you for calling.
                                          es-es:
                                            tts: Ha elegido recibir una devolución de llamada. Gracias por llamar.
                                  - disconnect:
                                      name: Disconnect
              - loop:
                  name: Loop
                  currentIndex:
                    var: Task.Loop
                  loopCount:
                    lit: 20
                  outputs:
                    loop:
                      actions:
                        - holdMusic:
                            name: Hold Music
                            prompt:
                              exp: Flow.HoldPrompt
                            bargeInEnabled:
                              lit: false
                            playStyle:
                              duration:
                                lit:
                                  seconds: 30
                        - playPositionInQueue:
                            name: Play Position In Queue
                            positionInQueue:
                              exp: Call.PositionInQueue
                            playbackMode: number
                        - playEstimatedWaitTime:
                            name: Play Estimated Wait Time
                            estimatedWaitTime:
                              exp: Call.EstimatedWaitTime
                            roundingInterval:
                              lit:
                                minutes: 5
                            specificRoundingIntervals:
                              - lit:
                                  seconds: 30
                              - lit:
                                  minutes: 1
                              - lit:
                                  minutes: 2
                              - lit:
                                  minutes: 5
                            playbackMode: lessThan
              - holdMusic:
                  name: Hold Music
                  prompt:
                    exp: Flow.HoldPrompt
                  bargeInEnabled:
                    lit: false
                  playStyle:
                    entirePrompt: true
          failure:
            actions:
              - disconnect:
                  name: Disconnect
  startUpTaskVariables:
    - stringVariable:
        name: Task.input2
        initialValue:
          noValue: true
    - integerVariable:
        name: Task.Loop
        initialValue:
          noValue: true
